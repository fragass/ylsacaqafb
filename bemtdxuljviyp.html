<!DOCTYPE html>
<html lang="pt-BR">
<head>
                     <script>
  // Proteção: exige login em todo acesso
  if (sessionStorage.getItem("auth") !== "true") {
 window.location.href = "index.html";
  }
</script>
  <meta charset="UTF-8">
    <title>Página inicial - Workday</title>
      <link rel="icon" href="favicon.png" type="image/png">
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>

  <div id="mini-profile">
   <span id="user-phone"></span>
  <!-- seta fina em SVG -->
  <svg id="arrow" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <polyline points="6 9 12 15 18 9"></polyline>
  </svg>
</div>

  <!-- Dropdown menu -->
  <div id="dropdown-menu">
    <button id="logout">Sair</button>
  </div>    
  
    <!-- CATÁLOGO -->
    <section id="catalogo" class="catalogo">
      <div class="card" data-titulo="deathnote">
        <img src="imgs/deathnote.jpg" alt="Death Note">
      </div>

      <div class="card" data-titulo="spyxfamily">
        <img src="imgs/spyxfamily.jpg" alt="Spy x Family">
      </div>

      <div class="card" data-titulo="jujutsukaisen">
        <img src="imgs/jujutsukaisen.jpg" alt="Jujutsu Kaisen">
      </div>

      <div class="card" data-titulo="sololeveling">
        <img src="imgs/sololeveling.jpg" alt="Solo Leveling">
      </div>
    </section>


    <!-- DETALHES -->
    <section id="detalhes" class="detalhes hidden">
      <button id="voltar">Voltar</button>

      <select id="temporadas"></select>

      <div id="episodios" class="episodios"></div>
                <p class="tutorial-link">
  Caso não saiba como assistir,
  <a href="tutorial.html">clique aqui.</a>
</p>
    </section>

  </div>

<script>
  // pega o telefone do usuário logado
  const phone = sessionStorage.getItem("loggedUserPhone");
  if (phone) {
    document.getElementById("user-phone").textContent = phone;
  }

  // proteção extra: redireciona se não estiver logado
  if (sessionStorage.getItem("auth") !== "true") {
    window.location.href = "index.html";
  }
 // dropdown toggle
    const miniProfile = document.getElementById("mini-profile");
    const dropdownMenu = document.getElementById("dropdown-menu");
    const arrow = document.getElementById("arrow");

miniProfile.addEventListener("click", () => {
  const isVisible = dropdownMenu.style.display === "block";
  dropdownMenu.style.display = isVisible ? "none" : "block";
  arrow.style.transform = isVisible ? "rotate(0deg)" : "rotate(180deg)";
});

    // logout: limpa sessão e volta para login
    document.getElementById("logout").addEventListener("click", () => {
      sessionStorage.clear();
      window.location.href = "index.html";
    });

    // opcional: fecha dropdown clicando fora
    document.addEventListener("click", (e) => {
      if (!miniProfile.contains(e.target) && !dropdownMenu.contains(e.target)) {
        dropdownMenu.style.display = "none";
        arrow.style.transform = "rotate(0deg)";
      }
    });
</script>
    
  <script src="js/main.js"></script>
</body>
</html>








